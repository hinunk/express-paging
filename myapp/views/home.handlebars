<h1>Example App: Home</h1>

<nav id="pager" data-total-page="{{totalPage}}" data-current-page="{{currentPage}}"></nav>
                {{!--注意data属性不要写错--}}
共{{totalPage}}页 | 当前第{{currentPage}}页 {{#each articles}}
<article>
    <h1>{{title}}</h1>
    <p>{{content}}</p>
</article>
{{/each}}

<script src="https://apps.bdimg.com/libs/jquery/2.1.4/jquery.min.js"></script>
<script>
    {
        let $pager = $('#pager')
        let pager = $pager[0]
        let { totalPage, currentPage } = pager.dataset

        totalPage = parseInt(totalPage, 10)
        currentPage = parseInt(currentPage, 10)

        var $ol = $('<ol />')

        var buttonCount = 10
        let start1 = Math.max(currentPage - Math.round(buttonCount / 2), 1)
        let end1 = Math.min(start1 + buttonCount - 1, totalPage)
        let end2 = Math.min(currentPage + Math.round(buttonCount / 2) - 1, totalPage)
        let start2 = Math.max(end2 - buttonCount + 1, 1)
        let start = Math.min(start1, start2)
        let end = Math.max(end1, end2)  

        for (let i = start; i <= end; i++) {
            let $li
            console.log(1)
            if (i === currentPage) {
                $li = $(`<li><span>${i}</span></li>`)
            } else {
                $li = $(`<li><a href="?page=${i}">${i}</a></li>`)
            }
            $ol.append($li)
        }
        $pager.append($ol)
    }

</script>